(this["webpackJsonpteamwork-frontend"]=this["webpackJsonpteamwork-frontend"]||[]).push([[0],{30:function(e,t,a){},38:function(e,t,a){e.exports=a(77)},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},51:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),l=a(31),c=a.n(l),o=(a(43),a(2)),s=a(8),m=a(11),i=(a(44),a(45),function(e){var t=e.isLoggedIn,a=e.bgText,r=e.logOut;return n.a.createElement("nav",{className:"nav ".concat(a)},n.a.createElement(s.b,{to:"/teamwork/"},n.a.createElement("span",{className:"nav-link"},"TeamWork")),t?n.a.createElement("button",{onClick:r},"Logout"):n.a.createElement(s.b,{to:"/teamwork/login"},n.a.createElement("button",null,"Login")))});var u=function(e){var t=e.isAuthed,a=e.logOut;return n.a.createElement("div",{className:"App"},n.a.createElement(i,{isLoggedIn:t,logOut:a}),n.a.createElement("header",{className:"App-header"},n.a.createElement("h1",null,"Let's Connect as We Work Together"),n.a.createElement("p",null,"- Post Gifs, Articles, Comments and more..."),n.a.createElement(s.b,{to:"/teamwork/user"},n.a.createElement("button",null,"Get Started"))))},p=a(7),d=a.n(p),f=a(12),b=a(9),E=(a(51),a(34)),g=a(35),O=function(e){var t=e.color,a=e.size;return n.a.createElement("div",{style:{color:t,textAlign:"center"}},n.a.createElement(E.a,{icon:g.a,spin:!0,size:a}))};O.defaultProps={size:"2x",color:"#5F7192"};var v=O,h=function(e){var t=e.message,a=e.color,r=void 0===a?"#000":a;return n.a.createElement("p",{className:"error-text",style:{color:r}},"Error: ",t)},j=a(36),w=a.n(j),N=(JSON.parse(localStorage.getItem("data"))||{token:""}).token,y=w.a.create({baseURL:"https://sink-teamwork-api.herokuapp.com/api/v1",headers:{"Content-Type":"application/json"}});y.defaults.headers.common.Authorization="Bearer ".concat(N);var S=y;function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var x=function(e){var t=e.setLoginStatus,a=e.isAuthed,l=Object(r.useState)({email:"",password:""}),c=Object(o.a)(l,2),s=c[0],i=c[1],u=Object(r.useState)(null),p=Object(o.a)(u,2),E=p[0],g=p[1],O=Object(r.useState)(!1),j=Object(o.a)(O,2),w=j[0],N=j[1],y=function(e){g(null);var t=e.target,a=t.name,r=t.value;i(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach((function(t){Object(b.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},s,Object(b.a)({},a,r.trim())))},x=function(){var e=Object(f.a)(d.a.mark((function e(t){var a,r,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(null),t.preventDefault(),N(!0),a=s,e.prev=4,e.next=7,S.post("auth/signin",a);case 7:r=e.sent,N(!1),P(r.data.data),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(4),N(!1),n=e.t0.response.data,g({status:"error",msg:n.error});case 17:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t){return e.apply(this,arguments)}}(),P=function(e){localStorage.setItem("data",JSON.stringify(e)),t(!0)};return n.a.createElement(r.Fragment,null,a&&n.a.createElement(m.Redirect,{to:"/user"}),n.a.createElement("div",{className:"login-container"},n.a.createElement("form",{className:"login-form",onSubmit:x},n.a.createElement("h2",null,"TeamWork"),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"email"},"Email"),n.a.createElement("input",{type:"email",id:"email",name:"email",value:s.email,className:"form-input",required:!0,onChange:y})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"password"},"Password"),n.a.createElement("input",{type:"password",minLength:"5",id:"password",name:"password",value:s.password,className:"form-input",required:!0,onChange:y})),E&&n.a.createElement(h,{message:E.msg}),w&&n.a.createElement(v,{size:"1x",color:"#fff"}),n.a.createElement("button",{type:"submit",className:"login-button"},"Login"))))},P=(a(70),a(71),a(72),function(e){var t=e.user,a=e.setUser;return n.a.createElement("div",{className:"modal-content"},n.a.createElement("span",{onClick:function(){a(null)},title:"OK",className:"modal-closer"},"\xd7"),n.a.createElement("h2",{className:"modal-header"},"User successfully created"),n.a.createElement("div",{className:"modal-details"},n.a.createElement("p",null,"Please save new user login details"),n.a.createElement("span",null,"Email: ",n.a.createElement("i",null,t.email)),n.a.createElement("span",null,"Password: ",n.a.createElement("b",null,t.password))))});function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function F(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(Object(a),!0).forEach((function(t){Object(b.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var A=function(e){var t=e.formValue,a=e.setFormValue,r=e.addUser,l=e.isLoading,c=e.error,o=e.removeError,s=e.closeForm,m=e.user,i=e.setUser,u=function(e){o();var r=e.target,n=r.name,l=r.value;return a(F({},t,"address"===n?Object(b.a)({},n,l):Object(b.a)({},n,l.trim())))};return n.a.createElement("div",{className:"create-user-container"},n.a.createElement("p",{className:"close-form"},n.a.createElement("span",{title:"Close Form",onClick:function(){return s()}},"\xd7")),n.a.createElement("form",{className:"create-user-form",onSubmit:function(e){e.preventDefault(),r(t)}},n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"firstname"},"Firstname"),n.a.createElement("input",{type:"text",id:"firstname",value:t.firstName,name:"firstName",className:"form-input",required:!0,onChange:u})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"lastname"},"Lastname"),n.a.createElement("input",{type:"lastname",id:"lastname",value:t.lastName,name:"lastName",className:"form-input",required:!0,onChange:u})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"email"},"Email"),n.a.createElement("input",{type:"email",id:"email",value:t.email,name:"email",className:"form-input",required:!0,onChange:u})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"password"},"Password ",n.a.createElement("span",{className:"password-note"}," - Please note it")),n.a.createElement("input",{type:"text",id:"password",value:t.password,name:"password",autoComplete:"off",minLength:"5",className:"form-input",required:!0,onChange:u})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"jobrole"},"Job Role"),n.a.createElement("input",{type:"text",id:"jobrole",value:t.jobRole,name:"jobRole",className:"form-input",required:!0,onChange:u})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"dept"},"Department"),n.a.createElement("input",{type:"text",id:"dept",value:t.department,name:"department",className:"form-input",required:!0,onChange:u})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"address"},"Address"),n.a.createElement("input",{type:"text",id:"address",value:t.address,name:"address",className:"form-input",onChange:u})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"isadmin"},"Admin"),n.a.createElement("select",{value:t.isAdmin,id:"isadmin",name:"isAdmin",className:"form-input",onChange:u},n.a.createElement("option",{value:!1},"No"),n.a.createElement("option",{value:!0},"Yes"))),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"gender"},"Gender"),n.a.createElement("select",{value:t.gender,id:"gender",name:"gender",className:"form-input",onChange:u},n.a.createElement("option",{value:"Female"},"Female"),n.a.createElement("option",{value:"Male"},"Male"))),l&&n.a.createElement(v,{size:"1x",color:"#fff"}),c&&n.a.createElement(h,{message:c.msg}),n.a.createElement("button",{className:"create-user-button btn-white",type:"submit"},"Submit")),m&&n.a.createElement(P,{user:m,setUser:i}))},D=function(e){return e[0].toUpperCase()+e.substring(1)},L=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],U={firstName:"",lastName:"",email:"",gender:"Female",password:"",jobRole:"",department:"",address:"",isAdmin:!1},R=function(e){var t=e.isAuthed,a=e.logOut,l=e.data,c=Object(r.useState)(!1),s=Object(o.a)(c,2),u=s[0],p=s[1],b=Object(r.useState)(U),E=Object(o.a)(b,2),g=E[0],O=E[1],v=Object(r.useState)(!1),h=Object(o.a)(v,2),j=h[0],w=h[1],N=Object(r.useState)(null),y=Object(o.a)(N,2),k=y[0],x=y[1],P=Object(r.useState)(null),C=Object(o.a)(P,2),F=C[0],L=C[1],R=l&&l.isAdmin,I=function(){var e=Object(f.a)(d.a.mark((function e(t){var a,r,n,l,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),e.prev=1,e.next=4,S.post("/auth/create-user",t);case 4:a=e.sent,w(!1),O(U),r=JSON.parse(a.config.data),n=r.email,l=r.password,L({email:n,password:l}),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(1),w(!1),c=e.t0.response.data,x({status:"error",msg:c.error});case 16:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return n.a.createElement(n.a.Fragment,null,R?n.a.createElement(n.a.Fragment,null,n.a.createElement(i,{isLoggedIn:t,logOut:a,bgText:"bg-text"}),n.a.createElement("main",{className:"main-container"},n.a.createElement("h2",null,"Welcome ",D(l.lastname)),!u&&n.a.createElement("button",{className:"btn-white",onClick:function(){return p(!0)}},"Add User")),u&&n.a.createElement(A,{formValue:g,setFormValue:O,addUser:I,isLoading:j,error:k,removeError:x,closeForm:p,user:F,setUser:L})):n.a.createElement(m.Redirect,{to:"/user"}))},I=(a(73),a(37));a(30),a(74);function q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var J={title:"",article:""},T=function(e){var t=e.addPost,a=Object(r.useState)(J),l=Object(o.a)(a,2),c=l[0],s=l[1],m=function(e){var t=e.target,a=t.name,r=t.value;return s(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?q(Object(a),!0).forEach((function(t){Object(b.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):q(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},c,Object(b.a)({},a,r)))};return n.a.createElement(n.a.Fragment,null,n.a.createElement("hr",null),n.a.createElement("div",{className:"post-article-container"},n.a.createElement("h3",{className:"post-article-header"},"Post Your Own Article"),n.a.createElement("form",{className:"post-article-form",onSubmit:function(e){e.preventDefault(),t(c),s(J)}},n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"article-title"},"Title"),n.a.createElement("input",{type:"text",className:"form-input",autoCapitalize:"sentences",id:"article-title",name:"title",value:c.title,onChange:m,required:!0})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"article-body"},"Body"),n.a.createElement("textarea",{className:"article-body form-input",id:"article-body",autoCapitalize:"sentences",name:"article",value:c.article,onChange:m,placeholder:"Write here..",required:!0})),n.a.createElement("button",{type:"submit"},"Post"))))},z=function(e){var t=e.data,a=t.id,r=t.createdon,l=t.title,c=t.article,o=t.authorid;return n.a.createElement("li",null,n.a.createElement("div",{onClick:function(){console.log("authorId :",o),console.log("articleId :",a)},className:"message-box"},n.a.createElement("h3",{className:"message-title"}," ",l),n.a.createElement("span",{className:"message-date"},function(e){var t=new Date(e),a=L[t.getMonth()];return"".concat(a," ").concat(t.getDate())}(r)),n.a.createElement("p",{className:"message"},c)))},W=(a(75),function(e){var t=e.logOut;return n.a.createElement("div",{className:"session-expired-container bg-text"},n.a.createElement("h3",null,"Your session has expired"),n.a.createElement("button",{className:"btn-white",onClick:function(){return t()}},"Signin"))}),G=function(e){var t=e.logOut,a=e.userSession,l=e.setUserSession,c=Object(r.useState)([]),s=Object(o.a)(c,2),m=s[0],i=s[1],u=Object(r.useState)(!1),p=Object(o.a)(u,2),b=p[0],E=p[1],g=Object(r.useState)(null),O=Object(o.a)(g,2),j=O[0],w=O[1],N=Object(r.useState)(0),y=Object(o.a)(N,2),k=y[0],x=y[1];Object(r.useEffect)((function(){var e=!1;return E(!0),function(){var t=Object(f.a)(d.a.mark((function t(){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.get("/feed/articles");case 3:a=t.sent,e||(i(a.data.data),E(!1)),t.next=13;break;case 7:if(t.prev=7,t.t0=t.catch(0),E(!1),401!==t.t0.response.status){t.next=12;break}return t.abrupt("return",l(!1));case 12:w("Oops! Something went wrong.");case 13:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}()(),function(){e=!0}}),[k,l]);var P=function(){var e=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.post("/articles",t);case 3:e.sent.data.data&&x((function(e){return e+1})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return n.a.createElement(n.a.Fragment,null,b?n.a.createElement(v,null):n.a.createElement("ul",{className:"message-pane"},function(e){return e.sort((function(e,t){return e.id-t.id}))}(m).map((function(e){return n.a.createElement(z,{key:e.id,data:e})}))),!a&&n.a.createElement(W,{logOut:t}),j&&n.a.createElement(h,{message:j}),n.a.createElement(T,{addPost:P}))},V=(a(76),function(){return n.a.createElement("div",null,"Gifs Component not ready yet")}),B=function(e){var t=e.isAuthed,a=e.logOut,l=e.data,c=Object(r.useState)(!0),s=Object(o.a)(c,2),u=s[0],p=s[1],d=Object(r.useState)(!0),f=Object(o.a)(d,2),b=f[0],E=f[1],g=l&&l.isAdmin;return n.a.createElement(n.a.Fragment,null,l.userId?n.a.createElement(n.a.Fragment,null,n.a.createElement(i,{isLoggedIn:t,bgText:"bg-text",logOut:a}),n.a.createElement("main",{className:"main-container"},n.a.createElement("h2",null,"Greetings! ",D(l.lastname)," ",g&&n.a.createElement(I.Link,{to:"/admin"},n.a.createElement("span",{className:"role-text"},"- Admin")," ")),n.a.createElement("div",null,u?n.a.createElement("button",{className:"small-btn btn-white",onClick:function(){p(!1)}},"View Gifs"):n.a.createElement("button",{className:"small-btn btn-white",onClick:function(){p(!0)}},"View Articles"))),n.a.createElement("div",{className:"post-view"},u?n.a.createElement(G,{logOut:a,userSession:b,setUserSession:E}):n.a.createElement(V,null))," "):n.a.createElement(m.Redirect,{to:"/login"}))},M=function(){var e=n.a.useState(!!localStorage.getItem("data")),t=Object(o.a)(e,2),a=t[0],r=t[1],l=function(){localStorage.removeItem("data"),r(!1)},c=JSON.parse(localStorage.getItem("data"))||{};return n.a.createElement(s.a,{basename:"/teamwork"},n.a.createElement(m.Switch,null,n.a.createElement(m.Route,{exact:!0,path:"/teamwork/",render:function(e){return n.a.createElement(u,Object.assign({},e,{isAuthed:a,logOut:l}))}}),n.a.createElement(m.Route,{path:"/teamwork/login",render:function(e){return n.a.createElement(x,Object.assign({},e,{setLoginStatus:r,isAuthed:a}))}}),n.a.createElement(m.Route,{path:"/teamwork/admin",render:function(e){return n.a.createElement(R,Object.assign({},e,{setLoginStatus:r,isAuthed:a,logOut:l,data:c}))}}),n.a.createElement(m.Route,{path:"/teamwork/user",render:function(e){return n.a.createElement(B,Object.assign({},e,{isAuthed:a,logOut:l,data:c}))}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(n.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[38,1,2]]]);
//# sourceMappingURL=main.b2c3cfd4.chunk.js.map