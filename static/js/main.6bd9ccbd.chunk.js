(this["webpackJsonpteamwork-frontend"]=this["webpackJsonpteamwork-frontend"]||[]).push([[0],{31:function(e,t,a){},38:function(e,t,a){e.exports=a(77)},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},51:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(32),c=a.n(l),o=(a(43),a(2)),s=a(8),m=a(11),i=(a(44),a(45),function(e){var t=e.isLoggedIn,a=e.bgText,n=e.logOut;return r.a.createElement("nav",{className:"nav ".concat(a)},r.a.createElement(s.b,{to:"/teamwork/"},r.a.createElement("span",{className:"nav-link"},"TeamWork")),t?r.a.createElement("button",{onClick:n},"Logout"):r.a.createElement(s.b,{to:"/teamwork/login"},r.a.createElement("button",null,"Login")))});var u=function(e){var t=e.isAuthed,a=e.logOut;return r.a.createElement("div",{className:"App"},r.a.createElement(i,{isLoggedIn:t,logOut:a}),r.a.createElement("header",{className:"App-header"},r.a.createElement("h1",null,"Let's Connect as We Work Together"),r.a.createElement("p",null,"- Post Gifs, Articles, Comments and more..."),r.a.createElement(s.b,{to:"/teamwork/user"},r.a.createElement("button",null,"Get Started"))))},p=a(7),d=a.n(p),f=a(12),b=a(9),E=(a(51),a(35)),g=a(36),O=function(e){var t=e.color,a=e.size;return r.a.createElement("div",{style:{color:t,textAlign:"center"}},r.a.createElement(E.a,{icon:g.a,spin:!0,size:a}))};O.defaultProps={size:"2x",color:"#5F7192"};var v=O,h=function(e){var t=e.message,a=e.color,n=void 0===a?"#000":a;return r.a.createElement("p",{className:"error-text",style:{color:n}},"Error: ",t)},j=a(37),w=a.n(j),N=(JSON.parse(localStorage.getItem("data"))||{token:""}).token,y=w.a.create({baseURL:"https://sink-teamwork-api.herokuapp.com/api/v1",headers:{"Content-Type":"application/json"}});y.defaults.headers.common.Authorization="Bearer ".concat(N);var S=y;function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var x=function(e){var t=e.setLoginStatus,a=e.isAuthed,l=Object(n.useState)({email:"",password:""}),c=Object(o.a)(l,2),s=c[0],i=c[1],u=Object(n.useState)(null),p=Object(o.a)(u,2),E=p[0],g=p[1],O=Object(n.useState)(!1),j=Object(o.a)(O,2),w=j[0],N=j[1],y=function(e){g(null);var t=e.target,a=t.name,n=t.value;i(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach((function(t){Object(b.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},s,Object(b.a)({},a,n.trim())))},x=function(){var e=Object(f.a)(d.a.mark((function e(t){var a,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(null),t.preventDefault(),N(!0),a=s,e.prev=4,e.next=7,S.post("auth/signin",a);case 7:n=e.sent,N(!1),P(n.data.data),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(4),N(!1),r=e.t0.response.data,g({status:"error",msg:r.error});case 17:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t){return e.apply(this,arguments)}}(),P=function(e){localStorage.setItem("data",JSON.stringify(e)),t(!0)};return r.a.createElement(n.Fragment,null,a&&r.a.createElement(m.Redirect,{to:"/user"}),r.a.createElement("div",{className:"login-container"},r.a.createElement("form",{className:"login-form",onSubmit:x},r.a.createElement("h2",null,"TeamWork"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"email",id:"email",name:"email",value:s.email,className:"form-input",required:!0,onChange:y})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",minLength:"5",id:"password",name:"password",value:s.password,className:"form-input",required:!0,onChange:y})),E&&r.a.createElement(h,{message:E.msg}),w&&r.a.createElement(v,{size:"1x",color:"#fff"}),r.a.createElement("button",{type:"submit",className:"login-button"},"Login"))))},P=(a(70),a(71),a(72),function(e){var t=e.user,a=e.setUser;return r.a.createElement("div",{className:"modal-content"},r.a.createElement("span",{onClick:function(){a(null)},title:"OK",className:"modal-closer"},"\xd7"),r.a.createElement("h2",{className:"modal-header"},"User successfully created"),r.a.createElement("div",{className:"modal-details"},r.a.createElement("p",null,"Please save new user login details"),r.a.createElement("span",null,"Email: ",r.a.createElement("i",null,t.email)),r.a.createElement("span",null,"Password: ",r.a.createElement("b",null,t.password))))});function F(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?F(Object(a),!0).forEach((function(t){Object(b.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):F(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var A=function(e){var t=e.formValue,a=e.setFormValue,n=e.addUser,l=e.isLoading,c=e.error,o=e.removeError,s=e.closeForm,m=e.user,i=e.setUser,u=function(e){o();var n=e.target,r=n.name,l=n.value;return a(C({},t,"address"===r?Object(b.a)({},r,l):Object(b.a)({},r,l.trim())))};return r.a.createElement("div",{className:"create-user-container"},r.a.createElement("p",{className:"close-form"},r.a.createElement("span",{title:"Close Form",onClick:function(){return s()}},"\xd7")),r.a.createElement("form",{className:"create-user-form",onSubmit:function(e){e.preventDefault(),n(t)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"firstname"},"Firstname"),r.a.createElement("input",{type:"text",id:"firstname",value:t.firstName,name:"firstName",className:"form-input",required:!0,onChange:u})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"lastname"},"Lastname"),r.a.createElement("input",{type:"lastname",id:"lastname",value:t.lastName,name:"lastName",className:"form-input",required:!0,onChange:u})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"email",id:"email",value:t.email,name:"email",className:"form-input",required:!0,onChange:u})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Password ",r.a.createElement("span",{className:"password-note"}," - Please note it")),r.a.createElement("input",{type:"text",id:"password",value:t.password,name:"password",autoComplete:"off",minLength:"5",className:"form-input",required:!0,onChange:u})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"jobrole"},"Job Role"),r.a.createElement("input",{type:"text",id:"jobrole",value:t.jobRole,name:"jobRole",className:"form-input",required:!0,onChange:u})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"dept"},"Department"),r.a.createElement("input",{type:"text",id:"dept",value:t.department,name:"department",className:"form-input",required:!0,onChange:u})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"address"},"Address"),r.a.createElement("input",{type:"text",id:"address",value:t.address,name:"address",className:"form-input",onChange:u})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"isadmin"},"Admin"),r.a.createElement("select",{value:t.isAdmin,id:"isadmin",name:"isAdmin",className:"form-input",onChange:u},r.a.createElement("option",{value:!1},"No"),r.a.createElement("option",{value:!0},"Yes"))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"gender"},"Gender"),r.a.createElement("select",{value:t.gender,id:"gender",name:"gender",className:"form-input",onChange:u},r.a.createElement("option",{value:"Female"},"Female"),r.a.createElement("option",{value:"Male"},"Male"))),l&&r.a.createElement(v,{size:"1x",color:"#fff"}),c&&r.a.createElement(h,{message:c.msg}),r.a.createElement("button",{className:"create-user-button btn-white",type:"submit"},"Submit")),m&&r.a.createElement(P,{user:m,setUser:i}))},L=function(e){return e[0].toUpperCase()+e.substring(1)},D=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],R={firstName:"",lastName:"",email:"",gender:"Female",password:"",jobRole:"",department:"",address:"",isAdmin:!1},U=function(e){var t=e.isAuthed,a=e.logOut,l=e.data,c=Object(n.useState)(!1),s=Object(o.a)(c,2),u=s[0],p=s[1],b=Object(n.useState)(R),E=Object(o.a)(b,2),g=E[0],O=E[1],v=Object(n.useState)(!1),h=Object(o.a)(v,2),j=h[0],w=h[1],N=Object(n.useState)(null),y=Object(o.a)(N,2),k=y[0],x=y[1],P=Object(n.useState)(null),F=Object(o.a)(P,2),C=F[0],D=F[1],U=l&&l.isAdmin,I=function(){var e=Object(f.a)(d.a.mark((function e(t){var a,n,r,l,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),e.prev=1,e.next=4,S.post("/auth/create-user",t);case 4:a=e.sent,w(!1),O(R),n=JSON.parse(a.config.data),r=n.email,l=n.password,D({email:r,password:l}),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(1),w(!1),c=e.t0.response.data,x({status:"error",msg:c.error});case 16:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,U?r.a.createElement(r.a.Fragment,null,r.a.createElement(i,{isLoggedIn:t,logOut:a,bgText:"bg-text"}),r.a.createElement("main",{className:"main-container"},r.a.createElement("h2",null,"Welcome ",L(l.lastname)),!u&&r.a.createElement("button",{className:"btn-white",onClick:function(){return p(!0)}},"Add User")),u&&r.a.createElement(A,{formValue:g,setFormValue:O,addUser:I,isLoading:j,error:k,removeError:x,closeForm:p,user:C,setUser:D})):r.a.createElement(m.Redirect,{to:"/user"}))},I=(a(73),a(16));a(31),a(74);function q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var J={title:"",article:""},T=function(e){var t=e.addPost,a=Object(n.useState)(J),l=Object(o.a)(a,2),c=l[0],s=l[1],m=function(e){var t=e.target,a=t.name,n=t.value;return s(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?q(Object(a),!0).forEach((function(t){Object(b.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):q(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},c,Object(b.a)({},a,n)))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("hr",null),r.a.createElement("div",{className:"post-article-container"},r.a.createElement("h3",{className:"post-article-header"},"Post Your Own Article"),r.a.createElement("form",{className:"post-article-form",onSubmit:function(e){e.preventDefault(),t(c),s(J)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"article-title"},"Title"),r.a.createElement("input",{type:"text",className:"form-input",autoCapitalize:"sentences",id:"article-title",name:"title",value:c.title,onChange:m,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"article-body"},"Body"),r.a.createElement("textarea",{className:"article-body form-input",id:"article-body",autoCapitalize:"sentences",name:"article",value:c.article,onChange:m,placeholder:"Write here..",required:!0})),r.a.createElement("button",{type:"submit"},"Post"))))},z=function(e){var t=e.data,a=t.id,n=t.createdon,l=t.title,c=t.article,o=t.authorid;return r.a.createElement("li",null,r.a.createElement("div",{onClick:function(){console.log("authorId :",o),console.log("articleId :",a)},className:"message-box"},r.a.createElement("h3",{className:"message-title"}," ",l),r.a.createElement("span",{className:"message-date"},function(e){var t=new Date(e),a=D[t.getMonth()];return"".concat(a," ").concat(t.getDate())}(n)),r.a.createElement("p",{className:"message"},c)))},W=(a(75),function(e){var t=e.logOut;return r.a.createElement("div",{className:"session-expired-container bg-text"},r.a.createElement("h3",null,"Your session has expired"),r.a.createElement("button",{className:"btn-white",onClick:function(){return t()}},"Signin"))}),G=function(e){var t=e.logOut,a=e.userSession,l=e.setUserSession,c=Object(n.useState)([]),s=Object(o.a)(c,2),m=s[0],i=s[1],u=Object(n.useState)(!1),p=Object(o.a)(u,2),b=p[0],E=p[1],g=Object(n.useState)(null),O=Object(o.a)(g,2),j=O[0],w=O[1],N=Object(n.useState)(0),y=Object(o.a)(N,2),k=y[0],x=y[1];Object(n.useEffect)((function(){var e=!1;return E(!0),function(){var t=Object(f.a)(d.a.mark((function t(){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.get("/feed/articles");case 3:a=t.sent,e||(i(a.data.data),E(!1)),t.next=13;break;case 7:if(t.prev=7,t.t0=t.catch(0),E(!1),401!==t.t0.response.status){t.next=12;break}return t.abrupt("return",l(!1));case 12:w("Oops! Something went wrong.");case 13:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}()(),function(){e=!0}}),[k,l]);var P=function(){var e=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.post("/articles",t);case 3:e.sent.data.data&&x((function(e){return e+1})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,b?r.a.createElement(v,null):r.a.createElement("ul",{className:"message-pane"},function(e){return e.sort((function(e,t){return e.id-t.id}))}(m).map((function(e){return r.a.createElement(z,{key:e.id,data:e})}))),!a&&r.a.createElement(W,{logOut:t}),j&&r.a.createElement(h,{message:j}),r.a.createElement(T,{addPost:P}))},V=(a(76),function(){return r.a.createElement("div",null,"Gifs Component not ready yet")}),B=function(e){var t=e.isAuthed,a=e.logOut,l=e.data,c=Object(n.useState)(!0),s=Object(o.a)(c,2),u=s[0],p=s[1],d=Object(n.useState)(!0),f=Object(o.a)(d,2),b=f[0],E=f[1],g=l&&l.isAdmin;return r.a.createElement(r.a.Fragment,null,l.userId?r.a.createElement(r.a.Fragment,null,r.a.createElement(i,{isLoggedIn:t,bgText:"bg-text",logOut:a}),r.a.createElement("main",{className:"main-container"},r.a.createElement("h2",null,"Greetings! ",L(l.lastname)," ",g&&r.a.createElement(I.Link,{to:"/admin"},r.a.createElement("span",{className:"role-text"},"- Admin")," ")),r.a.createElement("div",null,u?r.a.createElement("button",{className:"small-btn btn-white",onClick:function(){p(!1)}},"View Gifs"):r.a.createElement("button",{className:"small-btn btn-white",onClick:function(){p(!0)}},"View Articles"))),r.a.createElement("div",{className:"post-view"},u?r.a.createElement(G,{logOut:a,userSession:b,setUserSession:E}):r.a.createElement(V,null))," "):r.a.createElement(m.Redirect,{to:"/login"}))},M={textAlign:"center",padding:"2rem",color:"#5F7192",fontSize:120,fontweight:"bolder"},Y=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(i,{isLoggedIn:!1,bgText:"bg-text"}),r.a.createElement("main",{className:"main-container"},r.a.createElement("h2",null,"Oops! Page Not Found"),r.a.createElement(I.Link,{to:"/"},r.a.createElement("button",{className:"btn-white small-btn"},"\u2190 Home"))),r.a.createElement("div",{style:M},"404"))},H=function(){var e=r.a.useState(!!localStorage.getItem("data")),t=Object(o.a)(e,2),a=t[0],n=t[1],l=function(){localStorage.removeItem("data"),n(!1)},c=JSON.parse(localStorage.getItem("data"))||{};return r.a.createElement(s.a,{basename:"/teamwork"},r.a.createElement(m.Switch,null,r.a.createElement(m.Route,{exact:!0,path:"/teamwork/",render:function(e){return r.a.createElement(u,Object.assign({},e,{isAuthed:a,logOut:l}))}}),r.a.createElement(m.Route,{path:"/teamwork/login",render:function(e){return r.a.createElement(x,Object.assign({},e,{setLoginStatus:n,isAuthed:a}))}}),r.a.createElement(m.Route,{path:"/teamwork/admin",render:function(e){return r.a.createElement(U,Object.assign({},e,{setLoginStatus:n,isAuthed:a,logOut:l,data:c}))}}),r.a.createElement(m.Route,{path:"/teamwork/user",render:function(e){return r.a.createElement(B,Object.assign({},e,{isAuthed:a,logOut:l,data:c}))}}),r.a.createElement(m.Route,{component:Y})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(H,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[38,1,2]]]);
//# sourceMappingURL=main.6bd9ccbd.chunk.js.map